<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <title>Testing APIs</title>
        <style type="text/css">
        </style>
</head>
<body>
  Enter Summoner Name <input id = "textbox"></input>
  <button id = "getAPI">Get API Data</button>
  <div id='name'></div>
  <div id='level'></div>
  <div id='mpts'></div>

  <script>
    //document.getElementById('getText').addEventListener('click', getText);
    document.getElementById('getAPI').addEventListener('click', getAPI);
    /*
    function getText() {
      fetch('sample.txt')
      .then((res) => res.text())
      .then((data) => {
        document.getElementById('output').innerHTML = data;
      })
    }
    */

    function getAPI(){
      var api1 = 'https://cors-anywhere.herokuapp.com/https://na1.api.riotgames.com/lol/summoner/v4/summoners/by-name/';
      var api2 = '?api_key=';
      var apiKey;
      var summName = document.getElementById("textbox").value;

      fetch('key.txt')
      .then((res) => res.text())
      .then((data) => {
        apiKey = data;
        console.log(apiKey);
      })
      
      var summNameCall = api1 + summName + api2 + apiKey;

      fetch(summNameCall)
      .then((res) => res.json())
      .then((data) => {
        var sid = data.id;

        document.getElementById('name').innerHTML = data.name;
        document.getElementById('level').innerHTML = 'level ' + data.summonerLevel;
      })
    }
  </script>
</body>
</html>
